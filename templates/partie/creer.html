{% extends "base.html" %}
{% block title %}CrÃ©er une partie{% endblock %}

{% block main %}
<link rel="stylesheet" type="text/css" href="/templates/styles/partie_creer.css" />
<div class="nav-buttons">
    <a href="/" class="btn-nav">ğŸ  Accueil</a>
    <a href="/parties/" class="btn-nav">ğŸ“‹ Mes parties</a>
</div>
<div class="page-header">
    <h1>ğŸ® CrÃ©er une nouvelle partie</h1>
    <p>Choisissez vos Ã©quipes et configurez votre partie</p>
</div>

{% if REQUEST_VARS['partie_soumise'] == True%}
<div class="messages">
  {% if REQUEST_VARS.get('err_nb_equipes') %}
  <div class="alert alert-error">
    âŒ {{ REQUEST_VARS['err_nb_equipes'] }}
  </div>
  {% endif %}

  {% if REQUEST_VARS.get('err_meme_equipe') %}
  <div class="alert alert-error">
    âŒ {{ REQUEST_VARS['err_meme_equipe'] }}
  </div>
  {% endif %}

  {% if REQUEST_VARS.get('att_nb_tour_absurde') %}
  <div class="alert alert-warning">
    âš ï¸ {{ REQUEST_VARS['att_nb_tour_absurde'] }}
  </div>
  {% endif %}

</div>
{% endif %}

<div class="form-container">
  <form method="post" action="">
    {% set equipes = REQUEST_VARS.get('equipes', []) %}
    <!-- Ã‰quipe 1 -->
    <fieldset>
      <legend>ğŸ‘¥ PremiÃ¨re Ã©quipe</legend>
      {% if equipes %}
        {% for equipe in equipes %}
          <label class="equipe-option">
            <input type="radio" name="nome1" value="{{ equipe[0] }}" required>
            <span class="equipe-label" style="background-color:#{{ equipe[1] }}">{{ equipe[0] }}</span>
          </label>
        {% endfor %}
      {% else %}
        <p class="help-text">
          Aucune Ã©quipe disponible. <a href="/equipe/creer/">CrÃ©ez-en une !</a>
        </p>
      {% endif %}
    </fieldset>

    <!-- Ã‰quipe 2 -->
    <fieldset>
      <legend>ğŸ‘¥ DeuxiÃ¨me Ã©quipe</legend>
      {% if equipes %}
        {% for equipe in equipes %}
          <label class="equipe-option">
            <input type="radio" name="nome2" value="{{ equipe[0] }}" required>
            <span class="equipe-label" style="background-color:#{{ equipe[1] }}">{{ equipe[0] }}</span>
          </label>
        {% endfor %}
      {% endif %}
    </fieldset>

    <!-- Configuration -->
    <fieldset>
      <legend>âš™ï¸ Configuration de la partie</legend>

      <div class="config-field">
        <label for="taille_grille">Taille de la grille <span class="help-text">(3 ou 4)</span></label>
        <input id="taille_grille" name="taille_grille" type="number"
               value="{{ REQUEST_VARS.get('taille_grille_soumise', '') }}"
               placeholder="3" min="3" max="4" required>
      </div>

      <div class="config-field">
        <label for="nb_tour_max">Nombre de tours maximum <span class="help-text">(50-100 recommandÃ©)</span></label>
        <input id="nb_tour_max" name="nb_tour_max" type="number"
               value="{{ REQUEST_VARS.get('max_tour_soumis', '') }}"
               placeholder="9" min="9" max="200" required>
      </div>

      <div class="checkbox-field">
        <input type="checkbox" id="est_special" name="est_speciale" value="true"
               {% if REQUEST_VARS.get('est_special_soumis') %}checked{% endif %}>
        <label for="est_special">ğŸ”¥ Partie avancÃ©e (avec attaques et sorts)</label>
      </div>
    </fieldset>

    <button type="submit" class="btn-submit">ğŸš€ CrÃ©er la partie</button>
  </form>
</div>
{% endblock %}
